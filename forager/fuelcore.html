<!DOCTYPE html>
<html>
<head>
	<title>fuelcore</title>
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>

<script type="text/javascript">

var Game = {
	energy: 15,
	basic: {
		type: "basic",
		name: "BASIC CORE",
		cost: 15,
		power: 0.001,
		chance: 0.0001,
		number: 0
	}
}

var cores = [];

function startup() {
	$("#cores").on('click', 'div', function() {
		var index = $("#cores div").index(this);

		if (cores[index].name == "MELTDOWN") {
			cores.splice(index, 1);
			updateCores();
		}
	})
}

function prettify(input) {
	var output = Math.round(input * 1000000)/1000000;
	return output;
}

var auto = setInterval(function() {
	Game.energy += (Game.basic.power * Game.basic.number);
	updateValues();

	for (var i = 0; i < cores.length; i++) {
		if (Math.random() <= cores[i].chance) {
			var type = cores[i].type;

			Game[type].number--;

			cores.splice(i, 1, {
			type: "",
			name: "MELTDOWN",
			power: "",
			chance: ""
		});
			updateCores();
		}
	}
}, 10);

function update() {
	updateCores();
	updateValues();
}

function buyCore() {
	//if (Game.energy >= Game.basic.cost) {
		//Game.energy -= Game.basic.cost;
		Game.basic.number++;

		cores.push({
			type: Game.basic.type,
			name: Game.basic.name,
			power: Game.basic.power,
			chance: Game.basic.chance
		});
	//}
	update();
}

function updateCores() {
	$('#cores').html("");
	for (var i = 0; i < cores.length; i++) {
		$('#cores').append(
			"<div class='core'>" +
			cores[i].name +
			"<br>" +
			cores[i].power +
			"<br>" +
			cores[i].chance +
			"</div>"
		)
	}
}

function updateValues() {
	$('#energy').html(Game.energy.toFixed(3));

	for (var i = 0; i < cores.length; i++) {
		if (cores[i].name == "MELTDOWN") {
			$('#cores div:nth-of-type(' + (i+1) + ')').addClass("melter");
		}
	}
}

</script>
</head>
<body onload="startup()">

<div id="cores"></div>

<button onclick="buyCore()">buy Core</button>

<div id="energy"></div>

<style type="text/css">

.core {
	display: inline-flex;
	justify-content: center;
	align-items: center;
	vertical-align: top;
	text-align: center;
	width: 100px;
	height: 100px;
	margin: 5px;
	border: 1px solid black;
}

.melter {
	color: orangered;
	cursor: pointer;
}

</style>
</body>
</html>